{% extends 'App_innovaSoft/base.html' %}

{% block content %}
{% load static %}
<h3 class="costos_txt text-body-secondary">Costos Indirectos</h3>

<!-- Tabla de Costos Indirectos -->
<table class="table table-bordered table-hover tabla">
    <thead class="table-dark">
        <tr>
            <th>Cuentas CIF</th>
            <th>Monto</th>
        </tr>
    </thead>
    <tbody>
        {% for costo in costos_indirectos %}
        <tr>
            <td>{{ costo.nombre }}</td>
            <td>${{ costo.saldo|floatformat:2 }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="2">No hay datos disponibles</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div class="costoTotales">
    <h3 class="text-body-secondary">Costos Totales</h3>

    <!-- Botón para abrir el modal -->
    <button type="button" class="btn_orden btn btn-success" data-bs-toggle="modal" data-bs-target="#ordenModal">
        Crear Orden
    </button>

    <!-- Tabla de Costos Totales -->
    <table class="table table-bordered table-hover tablaCosto">
        <thead class="table-dark">
            <tr>
                <th>Tasa del CIF</th>
                <th>Costo de mano de obra</th>
                <th>Costo de materia prima</th>
                <th>Costo total</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>20%</td>
                <td>$3,500.00</td>
                <td>$125.00</td>
                <td>$3,625.00</td>
            </tr>
        </tbody>
    </table>
    <button class="btnCalcular btn btn-dark">Calcular total</button>
</div>

<!-- Modal -->
<div class="modal fade" id="ordenModal" tabindex="-1" aria-labelledby="ordenModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ordenModalLabel">Crear Nueva Orden</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Formulario dentro del modal --> <!--  -->
                <form method="POST"> <!-- <form> -->
                    {% csrf_token %} <!-- N -->
                    <div class="mb-3">
                        <label for="numeroOrden" class="form-label">Número de orden:</label>
                        <input type="text" class="form-control" id="numeroOrden" name="numeroOrden" placeholder="Ingrese número de orden">
                    </div>
                    <div class="mb-3">
                        <label for="fechaInicio" class="form-label">Fecha inicio:</label>
                        <input type="date" class="form-control" id="fechaInicio" name="fechaInicio"> <!-- name="fechaInicio" -->
                    </div>
                    <div class="mb-3">
                        <label for="fechaFin" class="form-label">Fecha fin:</label>
                        <input type="date" class="form-control" id="fechaFin" name="fechaFin"> <!-- name="fechaFin" -->
                    </div>
                    <div class="mb-3">
                        <label for="departamento" class="form-label">Departamento:</label>
                        {% if departamentos %}
                        <p>Departamentos están disponibles</p>
                        {% else %}
                        <p>No se encontraron departamentos.</p>
                        {% endif %}
                        <select class="form-select" id="departamento" name="departamento"> <!-- name="departamento" -->
                            <option selected>Seleccione un Departamento</option>
                            {% for departamento in departamentos %}
                            <option value="{{ departamento.idDepartamento }}">{{ departamento.nombre }}</option>
                            {% empty %}
                            <option disabled>No hay departamentos disponibles</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Personal:</label><br>
                        <input type="checkbox" id="persona1" name="personal" value="Juan Perez"> <label for="persona1">Juan Perez</label><br> <!-- name="personal" value="Juan Perez" -->
                        <input type="checkbox" id="persona2" name="personal" value="Ana Lucia"> <label for="persona2">Ana Lucia</label><br> <!-- name="personal" value="Ana Lucia" -->
                        <input type="checkbox" id="persona3" name="personal" value="Steven Martinez"> <label for="persona3">Steven Martinez</label><br> <!-- name="personal" value="Steven Martinez" -->
                        <button type="button" class="btn btn-outline-primary mt-2">Seleccionar todos</button>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Materia Prima:</label><br>
                        <input type="checkbox" id="materia1" name="materia" value="Energía"> <label for="materia1">Energía</label><br> <!-- name="materia" value="Energía" -->
                        <input type="checkbox" id="materia2" name="materia" value="Internet"> <label for="materia2">Internet</label><br> <!-- name="materia" value="Internet" -->
                        <button type="button" class="btn btn-outline-primary mt-2">Seleccionar todos</button>
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar</button> <!-- N -->
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <!-- <button type="submit" class="btn btn-primary">Guardar</button> -->
            </div>
        </div>
    </div>
</div>

<!-- Scripts de Bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"></script>
<link rel="stylesheet" href="{% static 'css/costos.css' %}">
{% endblock %}